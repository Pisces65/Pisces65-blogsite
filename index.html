<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css"
    /> 

    <link rel="stylesheet" href="public/css/bootstrap.min.css">
    <link rel="stylesheet" href="public/icons/bootstrap-icons.css">
    <link rel="stylesheet" href="public/css/index/navbar.css">
    <link rel="stylesheet" href="public/css/index/background.css">
    <link rel="stylesheet" href="public/css/index/daily-emotion.css">
    <link rel="stylesheet" href="public/css/index/anime-calendar.css">
    <link rel="stylesheet" href="public/css/index/blog1.css">
    <link rel="stylesheet" href="public/css/index/blog2.css">
    <link rel="stylesheet" href="public/css/index/footer.css">
    <link rel="stylesheet" href="public/css/index/leftbar.css">
    <link rel="stylesheet" href="style.css">

    <title>Pisces65</title>
</head>
<body>
    <div id="share">
        <div>
            <a id="qzone" href="#" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-share-fill" viewBox="0 0 16 16">
                    <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"/>
                </svg>
            </a>
        </div>
        <div>
            <a id="twitter" href="#" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
                    <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
                </svg>
            </a>
        </div>
        <div>
            <a id="telegram" target="_blank" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telegram" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
                </svg>
            </a>
        </div>
    </div>
    <div id="scroll-to-top">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-arrow-up-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
            </svg>
        </div>
    </div>
    <section id="background"></section>
    <div class="nav">
        <div class="intro">
            <img class="portrait"" src="public/images/selfportrait.jpg" alt="self_portrait">
            <h1>Pisces65个人博客</h1>
            <span>Always believe something good will happen.</span>
        </div>
        <ul class="navlist">
            <li><a href="#">主页</a></li>
            <li><a href="#">碎碎念</a></li>
            <li>
                <a href="#" class="second-navlist-menu">博客</a>
                <ul class="second-navlist">
                    <li><a href="#">Splatoon</a></li>
                    <li><a href="#">代码</a></li>
                    <li><a href="#">ACG</a></li>
                </ul>
            </li>
            <li><a href="#">关于</a></li>
        </ul>
        <form action="" class="search">
            <input type="search">
            <img src="public/svgs/search_black_24dp.svg" alt="search_icon">
        </form>

    </div>
    <div class="content">
        <div class="leftbar"></div>
        <div class="main-content">
            <div class="daily-emotion">
                <p class="zh-title">今日碎碎念</p>
                <p class="zh-body">今天去看了张艺谋的《悬崖之上》，这个谍战片对于特务的刻画可以说是非常狡猾的了，拷问那端真的在电影院看效果太震撼了，忍不住想捂住眼睛。</p>
                <p class="jp">21.5.15 土曜日</p>
            </div>
            <div class="blog1">
                <p class="zh-title">关于抽卡Gatcha游戏又沉船这件事</p>
                <div>
                    <img src="public/images/blog1.jpg" alt="blog-image">
                    <p class="zh-body">铃兰小姐就是我们的光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光</p>
                </div>
                <p class="jp">21.4.19 月曜日</p>
            </div>
            <div class="blog2">
                <p class="zh-title">关于抽卡Gatcha游戏又沉船这件事</p>
                <div>
                    <img src="public/images/blog2.jpg" alt="blog-image">
                    <p class="zh-body">铃兰小姐就是我们的光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光光</p>
                </div>
                <p class="jp">21.4.19 月曜日</p>
            </div>
            <div class="bilivideo">
                <div><p class="zh-title">Splatoon个人击杀锦集</p></div>
                <div style="position: relative; padding: 30% 45%; margin-bottom:17px;">
                    <iframe style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;" 
                        src="//player.bilibili.com/player.html?bvid=BV1Eb4y1Q7i7&page=1&as_wide=1&high_quality=1&danmaku=1" 
                        scrolling="no" 
                        border="0" 
                        frameborder="no" 
                        framespacing="0" 
                        allowfullscreen="true">
                    </iframe>
                </div>
            </div>
                
            

        
        </div>
        <div class="rightbar">
            <div class="audio-player">
                <div class="music-container" id="music-container">
                    <div class="music-info">
                      <p id="title" class="jp"></p>
                      <div class="progress-container" id="progress-container">
                        <div class="progress" id="progress"></div>
                      </div>
                      <div class="music-time">
                        <div id="currTime"></div>
                        <span>/</span>
                        <div id="durTime"></div>
                      </div>
                    </div>
              
                    <audio src="" id="audio"></audio>
              
                    <div class="img-container">
                      <img src="" alt="music-cover" id="cover" />
                    </div>
                    <div class="navigation">
                      <div id="prev">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 6h2v12H6zm3.5 6l8.5 6V6l-8.5 6zm6.5 2.14L12.97 12 16 9.86v4.28z"/></svg>
                      </div>
                      <div id="play" class="big-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"/></svg>
                      </div>
                      <div id="next">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 18l8.5-6L6 6v12zm2-8.14L11.03 12 8 14.14V9.86zM16 6h2v12h-2z"/></svg>
                      </div>
                    </div>
                  </div>
            </div>


            <div class="anime-calendar">
                <div class="anime-title"><p class="jp">番組放送スケジュール</p></div>
                <div class="time">
                    <div class="anime-svg">
                        <img  id="anime-yesterday" src="public/svgs/keyboard_arrow_left_white_24dp.svg" alt="yesterday">
                    </div>
                    <div><p class="jp"></p></div>
                    <div><p class="jp"></p></div>
                    <div class="anime-svg">
                        <img src="public/svgs/keyboard_arrow_right_white_24dp.svg" alt="tomorrow" id="anime-tomorrow">
                    </div>
                </div>
                <div class="function">
                    <div class="anime-svg">
                        <img id="anime-sort" class="img-down" src="public/svgs/keyboard_arrow_down_white_24dp.svg" alt="sort">
                    </div>
                    <div class="anime-svg">
                        <svg id="anime-toggle-name" xmlns="http://www.w3.org/2000/svg" width="18.67" height="18.67" fill="white" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
                            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
                        </svg>
                    </div>
                </div>
                <!-- <div>
                    <div><p class="jp">00:00</p></div>
                    <div><a href="#" target="_blank"><p class="jp">灼热卡巴迪</p></a></div>
                </div> -->
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footer-content">
            <h1>Pisces65个人博客</h1>
            <p>Always believe something good will happen.</p>
        </div>
        <div class="footer-bottom">
            <p>Copyright &copy;2021 Pisces65</p>
        </div>
    </div>

    <script src="public/scripts/jquery-3.5.1.min.js"></script>
    <script src="public/scripts/background_patterns.js"></script>
    <script src="public/scripts/anime-calendar.js"></script>
    <script src="public/scripts/leftbar.js"></script>
    <script src="public/scripts/share.js"></script>
    <script>
        let songs = [];
        let songIndex = 0;
        $.getJSON('/public/data/songs.json', (songData)=>{
                songData.forEach(song => {
                    songs.push(song['title'])
                });
        })
        .then(()=>{
            $(document).ready(function(){
                const musicContainer = document.getElementById('music-container');
                const playBtn = document.getElementById('play');
                const prevBtn = document.getElementById('prev');
                const nextBtn = document.getElementById('next');

                const audio = document.getElementById('audio');
                const progress = document.getElementById('progress');
                const progressContainer = document.getElementById('progress-container');
                const title = document.getElementById('title');
                const cover = document.getElementById('cover');
                const currTime = document.querySelector('#currTime');
                const durTime = document.querySelector('#durTime');

                // Initially load song details into DOM
                loadSong(songs[songIndex]);

                // Update song details
                function loadSong(song) {
                title.innerText = song;
                audio.src = `/public/music/songs/${song}.mp3`;
                cover.src = `/public/music/images/${song}.jpg`;
                }

                // Play song
                function playSong() {
                musicContainer.classList.add('play');
                playBtn.innerHTML = "<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='#FFFFFF'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/></svg>";

                audio.play();
                }

                // Pause song
                function pauseSong() {
                musicContainer.classList.remove('play');
                playBtn.innerHTML = "<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='#FFFFFF'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z'/></svg>";

                audio.pause();
                }

                // Previous song
                function prevSong() {
                songIndex--;

                if (songIndex < 0) {
                    songIndex = songs.length - 1;
                }

                loadSong(songs[songIndex]);

                playSong();
                }

                // Next song
                function nextSong() {
                songIndex++;

                if (songIndex > songs.length - 1) {
                    songIndex = 0;
                }

                loadSong(songs[songIndex]);

                playSong();
                }

                // Update progress bar
                function updateProgress(e) {
                const { duration, currentTime } = e.srcElement;
                const progressPercent = (currentTime / duration) * 100;
                progress.style.width = `${progressPercent}%`;
                }

                // Set progress bar
                function setProgress(e) {
                const width = this.clientWidth;
                const clickX = e.offsetX;
                const duration = audio.duration;

                audio.currentTime = (clickX / width) * duration;
                }

                //get duration & currentTime for Time of song
                function DurTime (e) {
                    const {duration,currentTime} = e.srcElement;
                    var sec;
                    var sec_d;

                    // define minutes currentTime
                    let min = (currentTime==null)? 0:
                    Math.floor(currentTime/60);
                    min = min <10 ? '0'+min:min;

                    // define seconds currentTime
                    function get_sec (x) {
                        if(Math.floor(x) >= 60){
                            
                            for (var i = 1; i<=60; i++){
                                if(Math.floor(x)>=(60*i) && Math.floor(x)<(60*(i+1))) {
                                    sec = Math.floor(x) - (60*i);
                                    sec = sec <10 ? '0'+sec:sec;
                                }
                            }
                        }else{
                            sec = Math.floor(x);
                            sec = sec <10 ? '0'+sec:sec;
                        }
                    } 

                    get_sec (currentTime,sec);

                    // change currentTime DOM
                    currTime.innerHTML = min +':'+ sec;

                    // define minutes duration
                    let min_d = (isNaN(duration) === true)? '0':
                        Math.floor(duration/60);
                    min_d = min_d <10 ? '0'+min_d:min_d;


                    function get_sec_d (x) {
                        if(Math.floor(x) >= 60){
                            
                            for (var i = 1; i<=60; i++){
                                if(Math.floor(x)>=(60*i) && Math.floor(x)<(60*(i+1))) {
                                    sec_d = Math.floor(x) - (60*i);
                                    sec_d = sec_d <10 ? '0'+sec_d:sec_d;
                                }
                            }
                        }else{
                            sec_d = (isNaN(duration) === true)? '0':
                            Math.floor(x);
                            sec_d = sec_d <10 ? '0'+sec_d:sec_d;
                        }
                    } 

                    // define seconds duration
                    
                    get_sec_d (duration);

                    // change duration DOM
                    durTime.innerHTML = min_d +':'+ sec_d;
                        
                };

                // Event listeners
                playBtn.addEventListener('click', () => {
                const isPlaying = musicContainer.classList.contains('play');

                if (isPlaying) {
                    pauseSong();
                } else {
                    playSong();
                }
                });

                // Change song
                prevBtn.addEventListener('click', prevSong);
                nextBtn.addEventListener('click', nextSong);

                // Time/song update
                audio.addEventListener('timeupdate', updateProgress);

                // Click on progress bar
                progressContainer.addEventListener('click', setProgress);

                // Song ends
                audio.addEventListener('ended', nextSong);

                // Time of song
                audio.addEventListener('timeupdate',DurTime);
                })

        })
    </script>
</body>
</html>